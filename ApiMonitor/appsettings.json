{
  "Serilog": {
    "Using": [ "Serilog.Sinks.Console" ],
    "MinimumLevel": {
      "Default": "Information",
      "Override": { "Microsoft": "Warning" }
    },
    "WriteTo": [ { "Name": "Console" } ],
    "Enrich": [ "FromLogContext" ]
  },
  "KeyVault": {
    "VaultUri": "https://AA-KV-API-MONITORING.vault.azure.net/"
  },
  "ApiMonitor": {
    "DefaultTimeoutSeconds": 10,
    "DataSources": {
      "oracle-main": {
        "Provider": "Oracle",
        "ConnectionString": "Data Source = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = data02-icon-wcon-db01.fmcicon.local)(PORT = 1527)) (CONNECT_DATA=(SERVER=dedicated)(SERVICE_NAME=WCONDEV.fmcicon.local)));Pooling=true;User Id=wcon_if;Password=jGoEUZjFcLh0yU42;"
      }
    },
    "DefaultAuthRef": "InfaOAuthSand", // OPTIONAL: makes most endpoints need no auth block
    "AuthProfiles": {
      "InfaOAuthSand": {
        "Type": "OAuth2",
        "TokenUrl": "https://dm-uk.informaticacloud.com/authz-service/oauth/token",
        "ClientId": "kv:InfaSandbox-ClientId",
        "ClientSecret": "kv:InfaSandbox-ClientSecret",
        "Scope": ""
      },
      "InfaOAuthLive": {
        "Type": "OAuth2",
        "TokenUrl": "https://dm-uk.informaticacloud.com/authz-service/oauth/token",
        "ClientId": "kv:InfaProd-ClientId",
        "ClientSecret": "kv:InfaProd-ClientSecret",
        "Scope": ""
      }
    },
    "Endpoints": [
      {
        "Name": "Informatica Sandbox - Despatches For Order",
        "Environment": "Sandbox",
        "Url": "https://uk1-apigw.dm-uk.informaticacloud.com/t/api.fmconway.sandbox.co.uk/AA_Portal_GET_Despatches_For_Order",
        "Method": "GET",
        "IntervalSeconds": 900,
        "Binding": {
          "DataSource": "oracle-main",
          "Queries": [
            {
              "Name": "LatestOrderNo",
              "Sql": "SELECT MAX(des_so_int_order_ref) FROM inv_despatches where des_so_int_order_ref not like '9%'"
            }
          ],
          "UrlTemplate": "https://uk1-apigw.dm-uk.informaticacloud.com/t/api.fmconway.sandbox.co.uk/AA_Portal_GET_Despatches_For_Order?orderNumber={LatestOrderNo}"
        },
        "Success": {
          "StatusCodes": [ 200 ],
          "JsonPointer": "/wconDespatches/0",
          "MaxLatencyMs": 10000
        }
      },
      {
        "Name": "Informatica Sandbox - Get Customer Credit Status",
        "Environment": "Sandbox",
        "Url": "https://uk1-apigw.dm-uk.informaticacloud.com/t/api.fmconway.sandbox.co.uk/AAPortal_GET_Credit_Status",
        "Method": "GET",
        "IntervalSeconds": 900,
        "Binding": {
          "DataSource": "oracle-main",
          "Queries": [
            {
              "Name": "ValidCustomerNo",
              "Sql": "SELECT MAX(ia_ow_account) FROM bpl_invoice_accounts where ia_expired is null"
            }
          ],
          "UrlTemplate": "https://uk1-apigw.dm-uk.informaticacloud.com/t/api.fmconway.sandbox.co.uk/AAPortal_GET_Credit_Status?var_Icon_Account_No={ValidCustomerNo}"
        },
        "Success": {
          "StatusCodes": [ 200 ],
          "JsonPointer": "/recordCount",
          "MaxLatencyMs": 10000
        }
      }
    ]
  }
}
